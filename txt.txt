""" @app.websocket("/ws")
async def websocket_endpoint(websocket: WebSocket):

    await websocket.accept()
    
    try:
        websockets.add(websocket)
        print("WebSocket connection established")

        while True:
            data = await websocket.receive_text()
            print(f"Received message: {data}")

            for ws in websockets:
                if ws != websocket and ws.client_state != 3:
                    try:
                        await ws.send_text(data)
                    except:
                        websockets.remove(ws)

    except WebSocketDisconnect:
        websockets.remove(websocket)
        print("WebSocket disconnected")

    except Exception as e:
        print(f"WebSocket error: {e}")  """